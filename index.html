<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>HalalX Platform - Shariah-Compliant BNPL</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Inter",
          "Roboto", "Oxygen", "Ubuntu", "Cantarell", sans-serif;
        background: #000;
        color: #fff;
        overflow-x: hidden;
      }
      .app-container {
        min-height: 100vh;
        max-width: 414px;
        margin: 0 auto;
        background: #000;
      }
      .screen {
        display: none;
        padding: 64px 24px 24px;
        min-height: 100vh;
      }
      .screen.active {
        display: block;
      }
      .header {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        background: #000;
        z-index: 100;
        padding: 24px;
        max-width: 414px;
        margin: 0 auto;
      }
      .stepper {
        display: flex;
        gap: 4px;
        height: 4px;
        background: #3c3d28;
        border-radius: 8px;
        overflow: hidden;
      }
      .step {
        flex: 1;
        background: #666;
        transition: background 0.3s;
      }
      .step.active {
        background: #b4e95e;
      }
      h1 {
        font-size: 36px;
        line-height: 44px;
        font-weight: 700;
        margin-bottom: 12px;
        color: #fff;
      }
      h2 {
        font-size: 28px;
        line-height: 36px;
        font-weight: 600;
        margin-bottom: 12px;
        color: #fff;
      }
      p {
        font-size: 16px;
        line-height: 24px;
        color: #b0b0b0;
        margin-bottom: 24px;
      }
      .button {
        background: #173de3;
        color: #fff;
        padding: 16px 24px;
        border-radius: 9999px;
        border: none;
        font-size: 17px;
        font-weight: 600;
        cursor: pointer;
        width: 100%;
        margin-bottom: 12px;
        transition: opacity 0.2s;
      }
      .button:hover {
        opacity: 0.8;
      }
      .button:active {
        opacity: 0.6;
      }
      .button:disabled {
        opacity: 0.35;
        cursor: not-allowed;
      }
      .input {
        width: 100%;
        height: 52px;
        background: rgba(255, 255, 255, 0.04);
        border: 1px solid #2c2e27;
        border-radius: 12px;
        padding: 0 16px;
        font-size: 16px;
        color: #fff;
        margin-bottom: 16px;
      }
      .input:focus {
        outline: none;
        border-color: #b4e95e;
      }
      .otp-container {
        display: flex;
        gap: 8px;
        margin-bottom: 24px;
      }
      .otp-input {
        width: 44px;
        height: 52px;
        background: rgba(255, 255, 255, 0.04);
        border: 1px solid #2c2e27;
        border-radius: 8px;
        text-align: center;
        font-size: 28px;
        color: #fff;
      }
      .otp-input:focus {
        outline: none;
        border-color: #b4e95e;
      }
      .credit-card {
        background: rgba(255, 255, 255, 0.04);
        border-radius: 16px;
        padding: 24px;
        margin-bottom: 16px;
      }
      .info-row {
        display: flex;
        justify-content: space-between;
        margin-bottom: 16px;
      }
      .progress-bar {
        height: 8px;
        background: #3c3d28;
        border-radius: 4px;
        overflow: hidden;
        margin: 16px 0 8px;
      }
      .progress-fill {
        height: 100%;
        background: #b4e95e;
        transition: width 0.3s;
      }
      .success-icon {
        font-size: 64px;
        color: #b4e95e;
        text-align: center;
        margin-bottom: 24px;
      }
      .caption {
        font-size: 13px;
        line-height: 18px;
        color: #b0b0b0;
        text-align: center;
      }
      .back-button {
        position: fixed;
        bottom: 24px;
        left: 24px;
        background: rgba(255, 255, 255, 0.1);
        border: 1px solid #2c2e27;
        padding: 8px 16px;
        border-radius: 8px;
        color: #fff;
        cursor: pointer;
      }
      .payment-method {
        background: rgba(255, 255, 255, 0.04);
        border: 1px solid #2c2e27;
        border-radius: 12px;
        padding: 16px;
        margin-bottom: 12px;
        cursor: pointer;
        transition: all 0.2s;
      }
      .payment-method:hover {
        background: rgba(255, 255, 255, 0.08);
        border-color: #b4e95e;
      }
      .payment-method input[type="radio"]:checked + .payment-label {
        border-color: #b4e95e;
      }
      /* Loading States */
      .loader {
        border: 3px solid rgba(255, 255, 255, 0.1);
        border-top: 3px solid #b4e95e;
        border-radius: 50%;
        width: 24px;
        height: 24px;
        animation: spin 1s linear infinite;
        margin: 0 auto;
      }
      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }
      .loading-overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.8);
        display: none;
        align-items: center;
        justify-content: center;
        z-index: 1000;
        flex-direction: column;
      }
      .loading-overlay.active {
        display: flex;
      }
      .loading-text {
        margin-top: 16px;
        font-size: 16px;
        color: #fff;
        text-align: center;
      }
      .upload-box {
        position: relative;
        cursor: pointer;
        transition: all 0.2s;
      }
      .upload-box:hover {
        opacity: 0.8;
      }
      .upload-box.uploaded {
        border: 2px solid #b4e95e;
      }
      .upload-box.uploaded::after {
        content: "✓";
        position: absolute;
        top: 8px;
        right: 8px;
        background: #b4e95e;
        color: #000;
        width: 24px;
        height: 24px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 16px;
        font-weight: bold;
      }
      .uploaded-image {
        width: 100%;
        height: 100%;
        object-fit: cover;
        border-radius: 16px;
      }
      .bank-option {
        transition: all 0.2s;
      }
      .bank-option:hover {
        background: rgba(255, 255, 255, 0.08);
        border-color: #b4e95e;
      }
      .bank-option input[type="radio"]:checked ~ div,
      .bank-option:has(input[type="radio"]:checked) {
        border-color: #b4e95e;
        border-width: 2px;
      }
      .header.hidden {
        display: none;
      }
    </style>
  </head>
  <body>
    <!-- Global Loading Overlay -->
    <div class="loading-overlay" id="global-loader">
      <div class="loader"></div>
      <div class="loading-text" id="loading-text">Processing...</div>
    </div>

    <div class="app-container">
      <!-- Progress Stepper -->
      <div class="header">
        <div class="stepper" id="stepper">
          <div class="step" data-step="1"></div>
          <div class="step" data-step="2"></div>
          <div class="step" data-step="3"></div>
          <div class="step" data-step="4"></div>
        </div>
      </div>

      <!-- Screen 1: Welcome -->
      <div class="screen active" id="screen-1">
        <h1>Welcome to HalalX</h1>
        <p>
          Access Shariah-compliant financing for your business purchases. Start
          your verification to get approved in minutes.
        </p>
        <button class="button" onclick="goToScreen(2)">
          Start Verification
        </button>
        <p class="caption">
          We'll verify your identity securely with Emirates ID.
        </p>
      </div>

      <!-- Screen 2: Phone Verification -->
      <div class="screen" id="screen-2">
        <h2>Verify Your Mobile Number</h2>
        <p>We'll text a 6-digit code to your number.</p>
        <input
          type="tel"
          class="input"
          placeholder="+971 50 123 4567"
          id="phone"
        />
        <button class="button" onclick="sendOTP()">Send Code</button>
      </div>

      <!-- Screen 3: OTP Entry -->
      <div class="screen" id="screen-3">
        <h2>Enter Verification Code</h2>
        <p>We sent a code to your number</p>
        <div class="otp-container">
          <input type="text" class="otp-input" maxlength="1" id="otp-1" />
          <input type="text" class="otp-input" maxlength="1" id="otp-2" />
          <input type="text" class="otp-input" maxlength="1" id="otp-3" />
          <input type="text" class="otp-input" maxlength="1" id="otp-4" />
          <input type="text" class="otp-input" maxlength="1" id="otp-5" />
          <input type="text" class="otp-input" maxlength="1" id="otp-6" />
        </div>
        <button class="button" onclick="verifyOTP()">Verify</button>
      </div>

      <!-- Screen 4: Emirates ID -->
      <div class="screen" id="screen-4">
        <h2>Scan Your Emirates ID</h2>
        <p>
          We need to verify your identity. Scan both sides of your Emirates ID.
        </p>
        <div style="display: flex; gap: 16px; margin: 24px 0;">
          <div
            class="upload-box"
            id="id-front-upload"
            onclick="uploadID('front')"
            style="
              flex: 1;
              aspect-ratio: 0.7;
              background: rgba(255, 255, 255, 0.04);
              border: 1px dashed #2c2e27;
              border-radius: 16px;
              display: flex;
              flex-direction: column;
              align-items: center;
              justify-content: center;
              overflow: hidden;
            "
          >
            <div id="id-front-content">
              <div style="font-size: 32px; margin-bottom: 8px;">📷</div>
              <div style="font-size: 16px; color: #fff;">Scan Front</div>
            </div>
          </div>
          <div
            class="upload-box"
            id="id-back-upload"
            onclick="uploadID('back')"
            style="
              flex: 1;
              aspect-ratio: 0.7;
              background: rgba(255, 255, 255, 0.04);
              border: 1px dashed #2c2e27;
              border-radius: 16px;
              display: flex;
              flex-direction: column;
              align-items: center;
              justify-content: center;
              overflow: hidden;
            "
          >
            <div id="id-back-content">
              <div style="font-size: 32px; margin-bottom: 8px;">📷</div>
              <div style="font-size: 16px; color: #fff;">Scan Back</div>
            </div>
          </div>
        </div>
        <p class="caption">
          Your ID is securely processed and only used for verification.
        </p>
        <button
          class="button"
          onclick="uploadAndContinue()"
          id="id-continue-btn"
        >
          Continue
        </button>
      </div>

      <!-- Screen 4.5: Loading Screen - Processing ID -->
      <div class="screen" id="screen-4-5">
        <div
          style="
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 60vh;
          "
        >
          <div
            class="loader"
            style="width: 48px; height: 48px; border-width: 4px;"
          ></div>
          <p style="margin-top: 24px; text-align: center; color: #fff;">
            Processing your Emirates ID...
          </p>
          <p style="margin-top: 8px; text-align: center; color: #b0b0b0;">
            Verifying document authenticity
          </p>
        </div>
      </div>

      <!-- Screen 4.7: User Information Prefill -->
      <div class="screen" id="screen-4-7">
        <h2>Confirm Your Information</h2>
        <p>
          We've extracted your details from the Emirates ID. Please review and
          confirm.
        </p>

        <div class="input-container" style="margin-bottom: 16px;">
          <label
            style="
              display: block;
              margin-bottom: 8px;
              color: #b0b0b0;
              font-size: 14px;
            "
            >Full Name (as per ID)</label
          >
          <input
            type="text"
            class="input"
            id="user-fullname"
            value="Ahmed Hassan Al Maktoum"
          />
        </div>

        <div class="input-container" style="margin-bottom: 16px;">
          <label
            style="
              display: block;
              margin-bottom: 8px;
              color: #b0b0b0;
              font-size: 14px;
            "
            >Address Line 1</label
          >
          <input
            type="text"
            class="input"
            id="user-address1"
            value="123 Sheikh Zayed Road"
          />
        </div>

        <div class="input-container" style="margin-bottom: 16px;">
          <label
            style="
              display: block;
              margin-bottom: 8px;
              color: #b0b0b0;
              font-size: 14px;
            "
            >Address Line 2 (Optional)</label
          >
          <input
            type="text"
            class="input"
            id="user-address2"
            placeholder="Apartment, Suite, etc."
          />
        </div>

        <div style="display: flex; gap: 8px; margin-bottom: 24px;">
          <div style="flex: 1;">
            <label
              style="
                display: block;
                margin-bottom: 8px;
                color: #b0b0b0;
                font-size: 14px;
              "
              >City</label
            >
            <input type="text" class="input" id="user-city" value="Dubai" />
          </div>
          <div style="flex: 1;">
            <label
              style="
                display: block;
                margin-bottom: 8px;
                color: #b0b0b0;
                font-size: 14px;
              "
              >Postal Code</label
            >
            <input type="text" class="input" id="user-postal" value="12345" />
          </div>
        </div>

        <button class="button" onclick="goToScreen('4-8')">Continue</button>
      </div>

      <!-- Screen 4.8: Credit Score Permission -->
      <div class="screen" id="screen-4-8">
        <h2>Check Your Credit Score</h2>
        <p>
          We need your permission to fetch your credit history from Al Etihad
          Credit Bureau (AECB) to assess your creditworthiness.
        </p>

        <div class="credit-card" style="margin: 24px 0;">
          <div style="display: flex; align-items: start;">
            <div style="font-size: 32px; margin-right: 16px;">📊</div>
            <div>
              <div
                style="
                  font-size: 16px;
                  font-weight: 600;
                  color: #fff;
                  margin-bottom: 8px;
                "
              >
                Why we need this
              </div>
              <div style="font-size: 14px; color: #b0b0b0; line-height: 20px;">
                Your credit score helps us determine your credit limit and
                repayment terms. This is a soft inquiry and won't affect your
                credit score.
              </div>
            </div>
          </div>
        </div>

        <div
          class="credit-card"
          style="
            background: rgba(180, 233, 94, 0.05);
            border: 1px solid #b4e95e;
          "
        >
          <div style="display: flex; align-items: center; margin-bottom: 12px;">
            <input
              type="checkbox"
              id="credit-consent"
              style="width: 24px; height: 24px; margin-right: 12px;"
            />
            <label
              for="credit-consent"
              style="font-size: 16px; color: #fff; cursor: pointer;"
            >
              I consent to fetch my credit history from AECB
            </label>
          </div>
          <div style="font-size: 13px; color: #b0b0b0; padding-left: 36px;">
            Your data is secure and encrypted. Read our
            <span
              style="
                color: #b4e95e;
                text-decoration: underline;
                cursor: pointer;
              "
              >Privacy Policy</span
            >
          </div>
        </div>

        <button
          class="button"
          onclick="fetchCreditScore()"
          id="credit-permission-btn"
          disabled
        >
          Check Credit Score
        </button>
      </div>

      <!-- Screen 4.9: Loading Credit Score -->
      <div class="screen" id="screen-4-9">
        <div
          style="
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 60vh;
          "
        >
          <div
            class="loader"
            style="width: 48px; height: 48px; border-width: 4px;"
          ></div>
          <p style="margin-top: 24px; text-align: center; color: #fff;">
            Fetching Credit Score...
          </p>
          <p style="margin-top: 8px; text-align: center; color: #b0b0b0;">
            Connecting to Al Etihad Credit Bureau
          </p>
        </div>
      </div>

      <!-- Screen 4.10: Credit Score Display -->
      <div class="screen" id="screen-4-10">
        <h2>Your Credit Score</h2>
        <p style="text-align: center;">
          Based on your credit history with AECB
        </p>

        <div class="credit-card" style="text-align: center; margin: 24px 0;">
          <div
            style="
              font-size: 64px;
              font-weight: 700;
              color: #b4e95e;
              margin-bottom: 8px;
            "
            id="credit-score-display"
          >
            750
          </div>
          <div style="font-size: 16px; color: #b0b0b0; margin-bottom: 16px;">
            Good
          </div>
          <div style="height: 1px; background: #3c3d28; margin: 16px 0;"></div>
          <div
            style="
              display: flex;
              justify-content: space-between;
              font-size: 14px;
            "
          >
            <div>
              <div style="color: #b0b0b0;">Payment History</div>
              <div style="color: #b4e95e; font-weight: 600;">95%</div>
            </div>
            <div>
              <div style="color: #b0b0b0;">Utilization</div>
              <div style="color: #b4e95e; font-weight: 600;">45%</div>
            </div>
            <div>
              <div style="color: #b0b0b0;">Age</div>
              <div style="color: #b4e95e; font-weight: 600;">7 yrs</div>
            </div>
          </div>
        </div>

        <button class="button" onclick="goToScreen('5')">Continue</button>
      </div>

      <!-- Screen 5: Bank Linking -->
      <div class="screen" id="screen-5">
        <h2>Link Your Bank Account</h2>
        <p>Select your bank to connect for secure auto-repayment.</p>

        <!-- Emirates NBD -->
        <div
          class="credit-card bank-option"
          onclick="selectBank('ENBD', 'Emirates NBD')"
          style="margin-top: 16px; cursor: pointer;"
        >
          <div style="display: flex; align-items: center;">
            <div
              style="
                width: 48px;
                height: 48px;
                background: #173de3;
                border-radius: 12px;
                display: flex;
                align-items: center;
                justify-content: center;
                margin-right: 16px;
              "
            >
              <span style="font-size: 20px; font-weight: bold; color: #fff;"
                >E</span
              >
            </div>
            <div style="flex: 1;">
              <div style="font-size: 16px; font-weight: 600; color: #fff;">
                Emirates NBD
              </div>
              <div style="font-size: 13px; color: #b0b0b0;">
                Most used in UAE
              </div>
            </div>
            <input
              type="radio"
              name="bank"
              value="ENBD"
              style="width: 20px; height: 20px;"
            />
          </div>
        </div>

        <!-- ADCB -->
        <div
          class="credit-card bank-option"
          onclick="selectBank('ADCB', 'ADCB')"
          style="cursor: pointer;"
        >
          <div style="display: flex; align-items: center;">
            <div
              style="
                width: 48px;
                height: 48px;
                background: #0066cc;
                border-radius: 12px;
                display: flex;
                align-items: center;
                justify-content: center;
                margin-right: 16px;
              "
            >
              <span style="font-size: 20px; font-weight: bold; color: #fff;"
                >A</span
              >
            </div>
            <div style="flex: 1;">
              <div style="font-size: 16px; font-weight: 600; color: #fff;">
                ADCB
              </div>
              <div style="font-size: 13px; color: #b0b0b0;">
                Abu Dhabi Commercial Bank
              </div>
            </div>
            <input
              type="radio"
              name="bank"
              value="ADCB"
              style="width: 20px; height: 20px;"
            />
          </div>
        </div>

        <!-- FAB -->
        <div
          class="credit-card bank-option"
          onclick="selectBank('FAB', 'First Abu Dhabi Bank')"
          style="cursor: pointer;"
        >
          <div style="display: flex; align-items: center;">
            <div
              style="
                width: 48px;
                height: 48px;
                background: #b4e95e;
                border-radius: 12px;
                display: flex;
                align-items: center;
                justify-content: center;
                margin-right: 16px;
              "
            >
              <span style="font-size: 20px; font-weight: bold; color: #000;"
                >F</span
              >
            </div>
            <div style="flex: 1;">
              <div style="font-size: 16px; font-weight: 600; color: #fff;">
                First Abu Dhabi Bank
              </div>
              <div style="font-size: 13px; color: #b0b0b0;">FAB</div>
            </div>
            <input
              type="radio"
              name="bank"
              value="FAB"
              style="width: 20px; height: 20px;"
            />
          </div>
        </div>

        <!-- Dubai Islamic Bank -->
        <div
          class="credit-card bank-option"
          onclick="selectBank('DIB', 'Dubai Islamic Bank')"
          style="cursor: pointer;"
        >
          <div style="display: flex; align-items: center;">
            <div
              style="
                width: 48px;
                height: 48px;
                background: #ff6600;
                border-radius: 12px;
                display: flex;
                align-items: center;
                justify-content: center;
                margin-right: 16px;
              "
            >
              <span style="font-size: 20px; font-weight: bold; color: #fff;"
                >D</span
              >
            </div>
            <div style="flex: 1;">
              <div style="font-size: 16px; font-weight: 600; color: #fff;">
                Dubai Islamic Bank
              </div>
              <div style="font-size: 13px; color: #b0b0b0;">
                Shariah-compliant
              </div>
            </div>
            <input
              type="radio"
              name="bank"
              value="DIB"
              style="width: 20px; height: 20px;"
            />
          </div>
        </div>

        <div style="display: flex; align-items: start; margin: 24px 0;">
          <input
            type="checkbox"
            id="consent"
            style="
              width: 24px;
              height: 24px;
              margin-right: 12px;
              margin-top: 2px;
            "
          />
          <label
            for="consent"
            style="font-size: 16px; color: #fff; line-height: 24px;"
            >I consent to securely connect my bank to HalalX.</label
          >
        </div>

        <button
          class="button"
          onclick="connectBank()"
          id="bank-connect-btn"
          disabled
        >
          Connect Bank
        </button>
      </div>

      <!-- Screen 5.5: Loading Bank Information -->
      <div class="screen" id="screen-5-5">
        <div
          style="
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 60vh;
          "
        >
          <div
            class="loader"
            style="width: 48px; height: 48px; border-width: 4px;"
          ></div>
          <p style="margin-top: 24px; text-align: center; color: #fff;">
            Fetching Banking Information...
          </p>
          <p
            style="margin-top: 8px; text-align: center; color: #b0b0b0;"
            id="bank-loading-text"
          >
            Connecting to your bank
          </p>
        </div>
      </div>

      <!-- Screen 5.7: Underwriting in Progress -->
      <div class="screen" id="screen-5-7">
        <div
          style="
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 60vh;
          "
        >
          <div
            class="loader"
            style="width: 48px; height: 48px; border-width: 4px;"
          ></div>
          <p style="margin-top: 24px; text-align: center; color: #fff;">
            Underwriting in Progress...
          </p>
          <p style="margin-top: 8px; text-align: center; color: #b0b0b0;">
            Analyzing your financial profile
          </p>
          <div style="margin-top: 32px; max-width: 300px;">
            <div
              style="
                background: rgba(255, 255, 255, 0.04);
                border-radius: 12px;
                padding: 16px;
              "
            >
              <div
                style="
                  display: flex;
                  justify-content: space-between;
                  margin-bottom: 12px;
                "
              >
                <span style="color: #b0b0b0;">Credit Assessment</span>
                <span style="color: #b4e95e;">✓</span>
              </div>
              <div
                style="
                  display: flex;
                  justify-content: space-between;
                  margin-bottom: 12px;
                "
              >
                <span style="color: #b0b0b0;">Bank Verification</span>
                <span style="color: #b4e95e;">✓</span>
              </div>
              <div style="display: flex; justify-content: space-between;">
                <span style="color: #b0b0b0;">Final Review</span>
                <div
                  class="loader"
                  style="width: 16px; height: 16px; border-width: 2px;"
                ></div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Screen 6: Credit Assessment -->
      <div class="screen" id="screen-6">
        <div class="success-icon">✓</div>
        <h1 style="text-align: center;">You're Approved!</h1>
        <p style="text-align: center;">
          Based on your business category (FMCG) and financial health, you have
          been approved for a 30-day payment cycle.
        </p>
        <div class="credit-card">
          <div class="info-row">
            <span style="font-size: 16px; color: #b0b0b0;">Credit Limit</span>
            <span style="font-size: 28px; font-weight: 600; color: #fff;"
              >AED 75,000</span
            >
          </div>
          <div style="height: 1px; background: #3c3d28; margin: 16px 0;"></div>
          <div class="info-row">
            <span style="font-size: 16px; color: #b0b0b0;">Payment Cycle</span>
            <span style="font-size: 28px; font-weight: 600; color: #fff;"
              >30 days</span
            >
          </div>
        </div>
        <button class="button" onclick="goToScreen(7)">
          Continue to Dashboard
        </button>
      </div>

      <!-- Screen 7: Dashboard -->
      <div class="screen" id="screen-7">
        <h2>Your Credit Overview</h2>
        <div class="credit-card">
          <div style="font-size: 16px; color: #b0b0b0; margin-bottom: 8px;">
            Available Credit
          </div>
          <div
            style="
              font-size: 36px;
              font-weight: 700;
              color: #fff;
              margin-bottom: 16px;
            "
          >
            AED 75,000
          </div>
          <div class="progress-bar">
            <div class="progress-fill" style="width: 47%;"></div>
          </div>
          <div style="font-size: 13px; color: #b0b0b0; margin-top: 8px;">
            47.0% utilized
          </div>
        </div>
        <div class="credit-card">
          <div style="font-size: 16px; color: #b0b0b0; margin-bottom: 8px;">
            Payment Cycle
          </div>
          <div
            style="
              font-size: 28px;
              font-weight: 600;
              color: #fff;
              margin-bottom: 8px;
            "
          >
            30 days
          </div>
          <div style="font-size: 16px; color: #b0b0b0;">
            Repay within 30 days of purchase
          </div>
        </div>
        <div style="margin: 24px 0;">
          <div
            style="
              font-size: 16px;
              color: #fff;
              font-weight: 600;
              margin-bottom: 16px;
            "
          >
            Quick Actions
          </div>
          <button
            class="button"
            style="
              background: rgba(255, 255, 255, 0.08);
              border: 1px solid #2c2e27;
            "
            onclick="goToScreen(8)"
          >
            Repay Now
          </button>
        </div>
        <div>
          <div
            style="
              font-size: 16px;
              color: #fff;
              font-weight: 600;
              margin-bottom: 16px;
            "
          >
            Recent Purchases
          </div>
          <div class="credit-card">
            <div
              style="
                display: flex;
                justify-content: space-between;
                margin-bottom: 8px;
              "
            >
              <div>
                <div style="font-size: 16px; font-weight: 600; color: #fff;">
                  AED 15,000
                </div>
                <div style="font-size: 13px; color: #b0b0b0;">2024-01-15</div>
              </div>
              <div style="font-size: 16px; color: #b4e95e;">Due: 15,000</div>
            </div>
          </div>
          <div class="credit-card">
            <div style="display: flex; justify-content: space-between;">
              <div>
                <div style="font-size: 16px; font-weight: 600; color: #fff;">
                  AED 25,000
                </div>
                <div style="font-size: 13px; color: #b0b0b0;">2024-01-10</div>
              </div>
              <div style="font-size: 16px; color: #b4e95e;">Due: 25,000</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Screen 8: Repayment Selection -->
      <div class="screen" id="screen-8">
        <h2>Make Repayment</h2>
        <p style="margin-bottom: 32px;">
          Select a payment method to repay your outstanding balance.
        </p>

        <div class="credit-card">
          <div class="info-row">
            <span style="font-size: 16px; color: #b0b0b0;"
              >Outstanding Balance</span
            >
            <span style="font-size: 28px; font-weight: 600; color: #fff;"
              >AED 40,000</span
            >
          </div>
          <div style="height: 1px; background: #3c3d28; margin: 16px 0;"></div>
          <div class="info-row">
            <span style="font-size: 16px; color: #b0b0b0;">Minimum Due</span>
            <span style="font-size: 20px; font-weight: 600; color: #b4e95e;"
              >AED 10,000</span
            >
          </div>
        </div>

        <div style="margin: 24px 0;">
          <div
            style="
              font-size: 16px;
              font-weight: 600;
              color: #fff;
              margin-bottom: 16px;
            "
          >
            Choose Payment Method
          </div>

          <!-- Payment Method Options -->
          <div
            class="payment-method"
            onclick="selectPaymentMethod('netbanking')"
          >
            <div style="display: flex; align-items: center;">
              <div
                style="
                  width: 48px;
                  height: 48px;
                  background: #173de3;
                  border-radius: 12px;
                  display: flex;
                  align-items: center;
                  justify-content: center;
                  margin-right: 16px;
                "
              >
                <span style="font-size: 24px;">🏦</span>
              </div>
              <div style="flex: 1;">
                <div style="font-size: 16px; font-weight: 600; color: #fff;">
                  Net Banking
                </div>
                <div style="font-size: 13px; color: #b0b0b0;">
                  Pay from your linked bank account
                </div>
              </div>
              <input
                type="radio"
                name="paymentMethod"
                value="netbanking"
                style="width: 20px; height: 20px;"
              />
            </div>
          </div>

          <div class="payment-method" onclick="selectPaymentMethod('debit')">
            <div style="display: flex; align-items: center;">
              <div
                style="
                  width: 48px;
                  height: 48px;
                  background: rgba(180, 233, 94, 0.1);
                  border-radius: 12px;
                  display: flex;
                  align-items: center;
                  justify-content: center;
                  margin-right: 16px;
                  border: 1px solid #b4e95e;
                "
              >
                <span style="font-size: 24px;">💳</span>
              </div>
              <div style="flex: 1;">
                <div style="font-size: 16px; font-weight: 600; color: #fff;">
                  Debit Card
                </div>
                <div style="font-size: 13px; color: #b0b0b0;">
                  Visa, Mastercard, Maestro
                </div>
              </div>
              <input
                type="radio"
                name="paymentMethod"
                value="debit"
                style="width: 20px; height: 20px;"
              />
            </div>
          </div>

          <div class="payment-method" onclick="selectPaymentMethod('cheque')">
            <div style="display: flex; align-items: center;">
              <div
                style="
                  width: 48px;
                  height: 48px;
                  background: rgba(255, 255, 255, 0.04);
                  border-radius: 12px;
                  display: flex;
                  align-items: center;
                  justify-content: center;
                  margin-right: 16px;
                  border: 1px solid #2c2e27;
                "
              >
                <span style="font-size: 24px;">📄</span>
              </div>
              <div style="flex: 1;">
                <div style="font-size: 16px; font-weight: 600; color: #fff;">
                  Cheque Payment
                </div>
                <div style="font-size: 13px; color: #b0b0b0;">
                  Upload cheque or deliver to office
                </div>
              </div>
              <input
                type="radio"
                name="paymentMethod"
                value="cheque"
                style="width: 20px; height: 20px;"
              />
            </div>
          </div>
        </div>

        <input
          type="number"
          class="input"
          placeholder="Enter amount"
          id="repay-amount"
          value="40000"
        />

        <button
          class="button"
          onclick="goToPayment()"
          id="continue-payment-btn"
        >
          Continue to Payment
        </button>
        <button
          class="button"
          style="
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid #2c2e27;
          "
          onclick="goToScreen(7)"
        >
          Cancel
        </button>
      </div>

      <!-- Screen 9: Net Banking Payment -->
      <div class="screen" id="screen-9">
        <h2>Net Banking Payment</h2>
        <p>Complete payment through your bank account.</p>

        <div class="credit-card">
          <div class="info-row">
            <span style="font-size: 16px; color: #b0b0b0;">Amount to Pay</span>
            <span
              style="font-size: 24px; font-weight: 600; color: #fff;"
              id="netbanking-amount"
              >AED 40,000</span
            >
          </div>
          <div style="height: 1px; background: #3c3d28; margin: 16px 0;"></div>
          <div class="info-row">
            <span style="font-size: 16px; color: #b0b0b0;">Selected Bank</span>
            <span style="font-size: 16px; font-weight: 600; color: #fff;"
              >Emirates NBD</span
            >
          </div>
        </div>

        <button
          class="button"
          onclick="processNetBanking()"
          id="netbanking-pay-btn"
        >
          <span id="netbanking-btn-text">Proceed to Bank Login</span>
        </button>
        <button
          class="button"
          style="
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid #2c2e27;
          "
          onclick="goToScreen(8)"
        >
          Change Payment Method
        </button>
      </div>

      <!-- Screen 10: Debit Card Payment -->
      <div class="screen" id="screen-10">
        <h2>Debit Card Payment</h2>
        <p>Enter your card details to complete payment.</p>

        <input
          type="text"
          class="input"
          placeholder="Card Number"
          id="card-number"
          maxlength="19"
        />
        <div style="display: flex; gap: 8px;">
          <input
            type="text"
            class="input"
            placeholder="MM/YY"
            id="card-expiry"
            maxlength="5"
            style="flex: 1;"
          />
          <input
            type="text"
            class="input"
            placeholder="CVV"
            id="card-cvv"
            maxlength="4"
            style="flex: 1;"
          />
        </div>
        <input
          type="text"
          class="input"
          placeholder="Cardholder Name"
          id="card-name"
        />

        <div
          class="credit-card"
          style="
            background: rgba(180, 233, 94, 0.05);
            border: 1px solid #b4e95e;
          "
        >
          <div style="display: flex; align-items: center;">
            <div style="font-size: 24px; margin-right: 12px;">🔒</div>
            <div style="flex: 1;">
              <div style="font-size: 14px; font-weight: 600; color: #b4e95e;">
                Secure Payment
              </div>
              <div style="font-size: 12px; color: #b0b0b0;">
                Your card details are encrypted and secure
              </div>
            </div>
          </div>
        </div>

        <button class="button" onclick="processDebitCard()" id="debit-pay-btn">
          <span id="debit-btn-text">Pay AED 40,000</span>
        </button>
        <button
          class="button"
          style="
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid #2c2e27;
          "
          onclick="goToScreen(8)"
        >
          Change Payment Method
        </button>
      </div>

      <!-- Screen 11: Cheque Payment -->
      <div class="screen" id="screen-11">
        <h2>Cheque Payment</h2>
        <p>Upload cheque details or schedule office visit.</p>

        <div class="credit-card" style="margin-bottom: 24px;">
          <div style="font-size: 16px; color: #b0b0b0; margin-bottom: 8px;">
            Amount to Pay
          </div>
          <div style="font-size: 28px; font-weight: 600; color: #fff;">
            AED 40,000
          </div>
        </div>

        <div
          class="upload-box"
          id="cheque-front-upload"
          onclick="uploadCheque('front')"
          style="
            width: 100%;
            aspect-ratio: 2;
            background: rgba(255, 255, 255, 0.04);
            border: 1px dashed #2c2e27;
            border-radius: 16px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            overflow: hidden;
            margin-bottom: 24px;
          "
        >
          <div id="cheque-front-content">
            <div style="font-size: 32px; margin-bottom: 8px;">📄</div>
            <div style="font-size: 14px; color: #fff; text-align: center;">
              Upload Cheque
            </div>
          </div>
        </div>
        <input
          type="file"
          id="cheque-upload"
          style="display: none;"
          accept="image/*"
        />

        <input
          type="text"
          class="input"
          placeholder="Cheque Number"
          id="cheque-number"
        />
        <input
          type="text"
          class="input"
          placeholder="Bank Name"
          id="cheque-bank"
        />

        <div
          style="
            margin: 16px 0;
            padding: 16px;
            background: rgba(255, 255, 255, 0.04);
            border-radius: 12px;
            border-left: 3px solid #b4e95e;
          "
        >
          <div
            style="
              font-size: 14px;
              font-weight: 600;
              color: #fff;
              margin-bottom: 4px;
            "
          >
            📍 Or Visit Our Office
          </div>
          <div style="font-size: 13px; color: #b0b0b0;">
            HalalX Financial Center, Business Bay, Dubai
          </div>
          <div style="font-size: 13px; color: #b0b0b0; margin-top: 4px;">
            Mon-Fri: 9 AM - 6 PM
          </div>
        </div>

        <button class="button" onclick="submitCheque()" id="cheque-submit-btn">
          Submit Cheque Payment
        </button>
        <button
          class="button"
          style="
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid #2c2e27;
          "
          onclick="goToScreen(8)"
        >
          Change Payment Method
        </button>
      </div>

      <!-- Screen 12: Payment Success -->
      <div class="screen" id="screen-12">
        <div class="success-icon">✓</div>
        <h1 style="text-align: center;">Payment Successful!</h1>
        <p style="text-align: center; margin-bottom: 32px;">
          Your payment of <strong>AED 40,000</strong> has been processed
          successfully.
        </p>

        <div class="credit-card">
          <div class="info-row">
            <span style="font-size: 16px; color: #b0b0b0;">Transaction ID</span>
            <span
              style="font-size: 14px; font-weight: 600; color: #fff;"
              id="transaction-id"
              >TXN-20241030-123456</span
            >
          </div>
          <div style="height: 1px; background: #3c3d28; margin: 16px 0;"></div>
          <div class="info-row">
            <span style="font-size: 16px; color: #b0b0b0;">Payment Method</span>
            <span
              style="font-size: 14px; font-weight: 600; color: #fff;"
              id="payment-method-display"
              >Net Banking</span
            >
          </div>
          <div style="height: 1px; background: #3c3d28; margin: 16px 0;"></div>
          <div class="info-row">
            <span style="font-size: 16px; color: #b0b0b0;">Date & Time</span>
            <span
              style="font-size: 14px; font-weight: 600; color: #fff;"
              id="payment-date"
              >30 Oct 2024, 1:23 PM</span
            >
          </div>
        </div>

        <button class="button" onclick="goToScreen(7)">
          Back to Dashboard
        </button>
      </div>
    </div>

    <script>
      let currentScreen = 1;

      function goToScreen(n) {
        document
          .querySelectorAll(".screen")
          .forEach((s) => s.classList.remove("active"));
        document.getElementById(`screen-${n}`).classList.add("active");
        currentScreen = n;

        // Update stepper only for onboarding screens (1-5)
        const header = document.querySelector(".header");
        if (typeof n === "string" && n.includes("-")) {
          // Hide stepper for intermediate screens
          header?.classList.add("hidden");
        } else if (n >= 6) {
          // Hide stepper after onboarding completes
          header?.classList.add("hidden");
        } else {
          // Show stepper for onboarding screens
          header?.classList.remove("hidden");
          document.querySelectorAll(".step").forEach((step, i) => {
            if (i < Math.min(n, 4) && n >= 1 && n <= 4) {
              step.classList.add("active");
            } else {
              step.classList.remove("active");
            }
          });
        }
      }

      function sendOTP() {
        goToScreen(3);
      }

      function verifyOTP() {
        goToScreen(4);
      }

      // OTP auto-focus
      document.querySelectorAll(".otp-input").forEach((input, index) => {
        input.addEventListener("input", (e) => {
          if (e.target.value && index < 5) {
            document.getElementById(`otp-${index + 2}`).focus();
          }
        });
        input.addEventListener("keydown", (e) => {
          if (e.key === "Backspace" && !e.target.value && index > 0) {
            document.getElementById(`otp-${index}`).focus();
          }
        });
      });

      // Bank consent toggle
      document.getElementById("consent")?.addEventListener("change", (e) => {
        const bankBtn = document.getElementById("bank-connect-btn");
        const bankSelected = document.querySelector(
          'input[name="bank"]:checked'
        );
        bankBtn.disabled = !e.target.checked || !bankSelected;
      });

      // Credit consent toggle
      document
        .getElementById("credit-consent")
        ?.addEventListener("change", (e) => {
          document.getElementById("credit-permission-btn").disabled = !e.target
            .checked;
        });

      // Track uploaded IDs
      let uploadedIDs = { front: false, back: false };

      async function uploadAndContinue() {
        if (!uploadedIDs.front || !uploadedIDs.back) {
          alert("Please upload both sides of your Emirates ID");
          return;
        }

        // Show loading screen
        showLoader("Processing Emirates ID...");
        setTimeout(() => {
          hideLoader();
          goToScreen("4-7"); // Go to prefill screen
        }, 2000);
      }

      function selectBank(code, name) {
        document.querySelectorAll('input[name="bank"]').forEach((radio) => {
          radio.checked = radio.value === code;
        });

        const bankBtn = document.getElementById("bank-connect-btn");
        const consent = document.getElementById("consent");
        bankBtn.disabled = !consent.checked;
      }

      async function connectBank() {
        const bankBtn = document.getElementById("bank-connect-btn");
        bankBtn.disabled = true;

        // Go to loading screen
        goToScreen("5-5");

        // Update loading text
        setTimeout(() => {
          document.getElementById("bank-loading-text").textContent =
            "Verifying account details...";
        }, 1000);

        setTimeout(() => {
          document.getElementById("bank-loading-text").textContent =
            "Fetching transaction history...";
        }, 2000);

        // After fetching bank info, go to underwriting
        setTimeout(() => {
          goToScreen("5-7");

          // After underwriting, go to credit assessment
          setTimeout(() => {
            goToScreen("6");
          }, 3000);
        }, 3000);
      }

      async function fetchCreditScore() {
        goToScreen("4-9");

        setTimeout(() => {
          goToScreen("4-10");
        }, 2500);
      }

      // Update upload function to track uploads
      const originalUploadID = uploadID;
      uploadID = async function (side) {
        await originalUploadID(side);
        uploadedIDs[side] = true;
        checkIDComplete();
      };

      function checkIDComplete() {
        const btn = document.getElementById("id-continue-btn");
        if (uploadedIDs.front && uploadedIDs.back) {
          btn.disabled = false;
        }
      }

      // Repayment flow
      let selectedPaymentMethod = "";

      function selectPaymentMethod(method) {
        selectedPaymentMethod = method;
        document
          .querySelectorAll('input[name="paymentMethod"]')
          .forEach((radio) => {
            radio.checked = radio.value === method;
          });
      }

      function goToPayment() {
        const amount = document.getElementById("repay-amount").value;
        if (!selectedPaymentMethod) {
          alert("Please select a payment method");
          return;
        }

        switch (selectedPaymentMethod) {
          case "netbanking":
            goToScreen(9);
            break;
          case "debit":
            goToScreen(10);
            break;
          case "cheque":
            goToScreen(11);
            break;
        }
      }

      async function processNetBanking() {
        const btn = document.getElementById("netbanking-pay-btn");
        const btnText = document.getElementById("netbanking-btn-text");

        btn.disabled = true;
        btnText.textContent = "Processing...";

        // Simulate bank login processing
        await new Promise((resolve) => setTimeout(resolve, 2000));

        showSuccess("netbanking");
      }

      async function processDebitCard() {
        const cardNumber = document.getElementById("card-number").value;
        const cardExpiry = document.getElementById("card-expiry").value;
        const cardCvv = document.getElementById("card-cvv").value;
        const cardName = document.getElementById("card-name").value;

        if (!cardNumber || !cardExpiry || !cardCvv || !cardName) {
          alert("Please fill in all card details");
          return;
        }

        const btn = document.getElementById("debit-pay-btn");
        const btnText = document.getElementById("debit-btn-text");

        btn.disabled = true;
        btnText.textContent = "Processing Payment...";

        // Simulate payment processing
        await new Promise((resolve) => setTimeout(resolve, 3000));

        showSuccess("debit");
      }

      async function submitCheque() {
        const chequeNumber = document.getElementById("cheque-number").value;
        const chequeBank = document.getElementById("cheque-bank").value;

        if (!chequeNumber || !chequeBank) {
          alert("Please fill in cheque details");
          return;
        }

        const btn = document.getElementById("cheque-submit-btn");

        btn.disabled = true;
        btn.textContent = "Submitting...";

        // Simulate submission
        await new Promise((resolve) => setTimeout(resolve, 2000));

        showSuccess("cheque");
      }

      function showSuccess(method) {
        // Generate random transaction ID
        const txnId =
          "TXN-" +
          new Date().getFullYear() +
          String(new Date().getMonth() + 1).padStart(2, "0") +
          String(new Date().getDate()).padStart(2, "0") +
          "-" +
          Math.floor(Math.random() * 1000000);

        document.getElementById("transaction-id").textContent = txnId;

        // Set payment method display
        const methodNames = {
          netbanking: "Net Banking",
          debit: "Debit Card",
          cheque: "Cheque Payment",
        };
        document.getElementById("payment-method-display").textContent =
          methodNames[method];

        // Set date and time
        const now = new Date();
        const dateStr = now.toLocaleDateString("en-GB", {
          day: "numeric",
          month: "short",
          year: "numeric",
        });
        const timeStr = now.toLocaleTimeString("en-US", {
          hour: "numeric",
          minute: "2-digit",
          hour12: true,
        });
        document.getElementById("payment-date").textContent =
          dateStr + ", " + timeStr;

        goToScreen(12);
      }

      // Card number formatting
      document.getElementById("card-number")?.addEventListener("input", (e) => {
        let value = e.target.value.replace(/\s/g, "");
        let formattedValue = value.match(/.{1,4}/g)?.join(" ") || value;
        if (formattedValue !== value) {
          e.target.value = formattedValue;
        }
      });

      // Expiry date formatting
      document.getElementById("card-expiry")?.addEventListener("input", (e) => {
        let value = e.target.value.replace(/\D/g, "");
        if (value.length >= 2) {
          value = value.substring(0, 2) + "/" + value.substring(2, 4);
        }
        e.target.value = value;
      });

      // CVV number only
      document.getElementById("card-cvv")?.addEventListener("input", (e) => {
        e.target.value = e.target.value.replace(/\D/g, "");
      });

      // Loading functions
      function showLoader(text = "Processing...") {
        document.getElementById("global-loader").classList.add("active");
        document.getElementById("loading-text").textContent = text;
      }

      function hideLoader() {
        document.getElementById("global-loader").classList.remove("active");
      }

      // Upload functions with dummy images
      async function uploadID(side) {
        showLoader(
          "Uploading " + (side === "front" ? "Front" : "Back") + " Side..."
        );

        // Simulate upload delay
        await new Promise((resolve) => setTimeout(resolve, 1500));

        const uploadBox = document.getElementById("id-" + side + "-upload");
        const content = document.getElementById("id-" + side + "-content");

        // Create dummy image
        const dummyImage = createDummyImage(
          side === "front" ? "FRONT" : "BACK"
        );
        content.innerHTML = `<img src="${dummyImage}" class="uploaded-image" alt="Emirates ID ${side}">`;
        uploadBox.classList.add("uploaded");

        hideLoader();
      }

      async function uploadCheque(side) {
        showLoader(
          "Uploading Cheque " + (side === "front" ? "Front" : "Back") + "..."
        );

        // Simulate upload delay
        await new Promise((resolve) => setTimeout(resolve, 1500));

        const uploadBox = document.getElementById("cheque-" + side + "-upload");
        const content = document.getElementById("cheque-" + side + "-content");

        // Create dummy image
        const dummyImage = createDummyImage("CHEQUE " + side.toUpperCase());
        content.innerHTML = `<img src="${dummyImage}" class="uploaded-image" alt="Cheque ${side}">`;
        uploadBox.classList.add("uploaded");

        hideLoader();
      }

      function createDummyImage(text) {
        // Create a canvas to generate a dummy image
        const canvas = document.createElement("canvas");
        canvas.width = 400;
        canvas.height = 250;
        const ctx = canvas.getContext("2d");

        // Background
        ctx.fillStyle = "#1a1a1a";
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        // Border
        ctx.strokeStyle = "#b4e95e";
        ctx.lineWidth = 2;
        ctx.strokeRect(10, 10, canvas.width - 20, canvas.height - 20);

        // Text
        ctx.fillStyle = "#b4e95e";
        ctx.font = "bold 32px Arial";
        ctx.textAlign = "center";
        ctx.textBaseline = "middle";
        ctx.fillText(text, canvas.width / 2, canvas.height / 2 - 20);

        // Small text
        ctx.font = "16px Arial";
        ctx.fillStyle = "#b0b0b0";
        ctx.fillText(
          "Uploaded Successfully",
          canvas.width / 2,
          canvas.height / 2 + 20
        );

        return canvas.toDataURL();
      }

      // Add loading states to existing functions
      const originalSendOTP = sendOTP;
      sendOTP = async function () {
        showLoader("Sending verification code...");
        setTimeout(() => {
          hideLoader();
          originalSendOTP();
        }, 1000);
      };

      const originalVerifyOTP = verifyOTP;
      verifyOTP = async function () {
        showLoader("Verifying code...");
        setTimeout(() => {
          hideLoader();
          originalVerifyOTP();
        }, 1000);
      };

      const originalProcessNetBanking = processNetBanking;
      processNetBanking = async function () {
        const btn = document.getElementById("netbanking-pay-btn");
        const btnText = document.getElementById("netbanking-btn-text");

        btn.disabled = true;
        btnText.innerHTML = '<div class="loader"></div> Processing...';
        showLoader("Processing bank login...");

        await new Promise((resolve) => setTimeout(resolve, 2000));

        btnText.textContent = "Proceed to Bank Login";
        hideLoader();

        showSuccess("netbanking");
      };

      const originalProcessDebitCard = processDebitCard;
      processDebitCard = async function () {
        const cardNumber = document.getElementById("card-number").value;
        const cardExpiry = document.getElementById("card-expiry").value;
        const cardCvv = document.getElementById("card-cvv").value;
        const cardName = document.getElementById("card-name").value;

        if (!cardNumber || !cardExpiry || !cardCvv || !cardName) {
          alert("Please fill in all card details");
          return;
        }

        const btn = document.getElementById("debit-pay-btn");
        const btnText = document.getElementById("debit-btn-text");

        btn.disabled = true;
        btnText.innerHTML = '<div class="loader"></div> Processing Payment...';
        showLoader("Processing payment...");

        await new Promise((resolve) => setTimeout(resolve, 3000));

        btnText.textContent = "Pay AED 40,000";
        hideLoader();

        showSuccess("debit");
      };

      const originalSubmitCheque = submitCheque;
      submitCheque = async function () {
        const chequeNumber = document.getElementById("cheque-number").value;
        const chequeBank = document.getElementById("cheque-bank").value;

        if (!chequeNumber || !chequeBank) {
          alert("Please fill in cheque details");
          return;
        }

        const btn = document.getElementById("cheque-submit-btn");

        btn.disabled = true;
        btn.innerHTML = '<div class="loader"></div> Submitting...';
        showLoader("Submitting cheque payment...");

        await new Promise((resolve) => setTimeout(resolve, 2000));

        btn.textContent = "Submit Cheque Payment";
        hideLoader();

        showSuccess("cheque");
      };
    </script>
  </body>
</html>
